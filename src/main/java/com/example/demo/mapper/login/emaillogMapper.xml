<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.login.EmailLogDao">
    <!-- 根据条件参数查询数据列表 -->
    <select id="findEmaillogYZM" resultType="String" parameterType="com.example.demo.entity.login.EmaillogEntity">
        SELECT 
        emaillog.YZM
        FROM EMAILLOG emaillog WHERE 1 = 1
            AND emaillog.emailUser =#{emailUser}
        	AND emaillog.createTime > date_sub(now(),interval 5 minute)
        	ORDER BY createTime DESC LIMIT 1
    </select>
    
    <!-- 插入数据 -->
    <insert id="addEmailYZM" parameterType="com.example.demo.entity.login.EmaillogEntity">
        INSERT INTO EMAILLOG (
             emailUser, YZM, createTime
        ) VALUES (
            #{emailUser},
            #{yzm},
            sysdate()
        )
    </insert>
</mapper>